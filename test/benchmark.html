<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	
	<script type="text/javascript" src="../build/classful-1.1.js"></script>
	<script type="text/javascript" src="res/lib/JohnResig.js"></script>
	
	<script type="text/javascript" src="res/benchmarks/default.js"></script>
	<script type="text/javascript" src="res/benchmarks/classful.js"></script>
	<script type="text/javascript" src="res/benchmarks/JohnResig.js"></script>
	<script type="text/javascript">
		var Benchmark = (function (){
			var _loops;
			var _runs;
			var _strategy;
			
			return Class.create ({
				constructor: function (loops, runs, strategy){
					_loops = loops;
					_runs = runs;
					_strategy = strategy;
				},
				properties: {
					run: function (){
						var average = 0;
			
						for (var r=0; r<_runs; r++){
							var start = new Date ().getTime ();
							
							for (var i=0; i<_loops; i++){
								_strategy.run ();
							}
							
							average += new Date ().getTime () - start;
						}
						
						average /= _runs;
						console.log ("Average: " + average + "ms");
					}
				}
			});
		})();
		
		var loops = 10000;
		var runs = 100;
		
		console.log ("Runs: " + runs);
		console.log ("Loops/run: " + loops);
		
		function benchDefaultDefinition (){
			new Benchmark (loops, runs, new DefaultDefinition ()).run ();
		}
	
		function benchClassfulDefinition (){
			new Benchmark (loops, runs, new ClassfulDefinition ()).run ();
		}
		
		function benchJohnResigDefinition (){
			new Benchmark (loops, runs, new JohnResigDefinition ()).run ();
		}
		
		function benchDefaultInstantiation (){
			new Benchmark (loops, runs, new DefaultInstantiation ()).run ();
		}
		
		function benchClassfulInstantiation (){
			new Benchmark (loops, runs, new ClassfulInstantiation ()).run ();
		}
		
		function benchJohnResigInstantiation (){
			new Benchmark (loops, runs, new JohnResigInstantiation ()).run ();
		}
	</script>
</head>

<body>
	<input type="button" value="Run bench: Class definition (default)" onclick="benchDefaultDefinition ();"/><br/>
	<input type="button" value="Run bench: Class definition (Classful JS)" onclick="benchClassfulDefinition ();"/><br/>
	<input type="button" value="Run bench: Class definition (John Resig)" onclick="benchJohnResigDefinition ();"/><br/><br/>
	
	<input type="button" value="Run bench: Class instantiation (default)" onclick="benchDefaultInstantiation ();"/><br/>
	<input type="button" value="Run bench: Class instantiation (Classful JS)" onclick="benchClassfulInstantiation ();"/><br/>
	<input type="button" value="Run bench: Class instantiation (John Resig)" onclick="benchJohnResigInstantiation ();"/>
</body>
</html>